# =============================================================================
# Feedman 環境変数設定サンプル
#
# 使い方:
#   cp .env.sample .env.production
#   vi .env.production  # 各値を実際の環境に合わせて編集
#   docker compose --env-file .env.production up -d
#
# 注意: .env.production は .gitignore に含まれており、リポジトリにコミットされません
# =============================================================================

# === 必須 ===

# PostgreSQL 接続URL（docker-compose内部ネットワーク用）
DATABASE_URL=postgres://feedman:feedman@db:5432/feedman?sslmode=disable

# Google OAuth 2.0 認証情報
# https://console.cloud.google.com/ で取得
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URL=http://localhost:8080/auth/google/callback

# セッション暗号化キー（openssl rand -base64 32 で生成）
SESSION_SECRET=your-random-secret-at-least-32-chars

# アプリケーションのベースURL（APIサーバー）
BASE_URL=http://localhost:8080

# フロントエンドから見たAPIサーバーのURL（ブラウザからアクセス可能なFQDN）
# Next.jsビルド時に静的にバンドルされる
NEXT_PUBLIC_API_URL=http://localhost:8080

# CORS許可オリジン（フロントエンドのURL）
# クロスオリジン構成でCookie送信を許可するために必要
CORS_ALLOWED_ORIGIN=http://localhost:3000

# === オプション（デフォルト値あり） ===

# サーバー設定
# SERVER_PORT=8080                   # APIサーバーのポート番号
# SESSION_MAX_AGE=86400              # セッション有効期間（秒、デフォルト: 24時間）

# フィードフェッチ設定
# FETCH_TIMEOUT=10s                  # フィードフェッチタイムアウト
# FETCH_MAX_SIZE=5242880             # フェッチ最大レスポンスサイズ（バイト、デフォルト: 5MB）
# FETCH_MAX_CONCURRENT=10            # 並列フェッチ数
# FETCH_INTERVAL=5m                  # フェッチスケジューラ実行間隔

# レート制限設定
# RATE_LIMIT_GENERAL=120             # API全般レート制限（リクエスト/分/ユーザー）
# RATE_LIMIT_FEED_REG=10             # フィード登録レート制限（リクエスト/分/ユーザー）

# はてなブックマーク連携設定
# HATEBU_TTL=24h                     # はてブ数キャッシュTTL
# HATEBU_BATCH_INTERVAL=10m          # はてブバッチ実行間隔
# HATEBU_API_INTERVAL=5s             # はてブAPI呼び出し間隔（スロットリング）
# HATEBU_MAX_CALLS_PER_CYCLE=100     # 1サイクルあたり最大API呼び出し数

# ログ設定
# LOG_RETENTION_DAYS=14              # ログ保持日数

# フロントエンド設定
# WEB_PORT=3000                      # ホスト側に公開するフロントエンドポート

# PostgreSQL設定（docker-compose用）
# POSTGRES_USER=feedman              # PostgreSQLユーザー名（デフォルト: feedman）
# POSTGRES_PASSWORD=feedman          # PostgreSQLパスワード（本番では必ず変更すること）
# POSTGRES_DB=feedman                # PostgreSQLデータベース名（デフォルト: feedman）
# DB_PORT=5432                       # ホスト側に公開するDBポート

# Cookie設定
# COOKIE_DOMAIN=                     # Cookieのドメイン（クロスサブドメイン時に設定、例: .example.com）
